<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <style>
    .grid-container {
      display: grid;
      /* grid-template: 75px / auto auto auto auto auto; */
      grid-template-columns: repeat( 5, minmax(75px, 1fr) );
      grid-gap: 10px;
      background-color: #2196F3;
      padding: 10px;
    }

    .grid-container > div {
      background-color: rgba(255, 255, 255, 0.8);
      text-align: center;
      padding: 20px 0;
      font-size: 30px;
    }
  </style>
</head>
<body>
  <table border=1>
    <tr>
      <td align="center">
        <!-- <iframe src="http://localhost:8000" height="380" width="660" name="iframe_DroneImage"></iframe> -->
        <iframe src="http://localhost:3000/DroneImage.html" height="380" width="660" name="iframe_DroneImage"></iframe>
      </td>

      <td>
        <div class="grid-container">
          <div class="item1">
            <button>
              <a onclick="call('takeoff');"><img height=35 Width=35 src="http://localhost:3000/takeoff.png"></a>
            </button>
          </div>
          <div class="item2">
            <button>
              <a onclick="call('photos');"><img height=35 Width=35 src="http://localhost:3000/camera.png"></a>
            </button>
          </div>
          <div class="item3">
            <button>
              <a onclick="call('up');"><img height=35 Width=35 src="http://localhost:3000/up.png"></a>
            </button>
          </div>
          <div class="item4">
            <button type="button" class="btn btn-dark">
              <a onclick="call('calibrate');">Calibrate</a>
            </button>
          </div>
          <div class="item5">
            <button>
              <a onclick="call('land');"><img height=35 Width=35 src="http://localhost:3000/land.png"></a>
            </button>
          </div>
          <div class="item6">
            <button class="btn btn-dark">
              <a onclick="call('follow');">Follow</a>
            </button></div>

          <div class="item7">7</div>
          <div class="item8">
            <button>
              <a onclick="call('forward');"><img height=35 Width=35 src="http://localhost:3000/forward.png"></a>
            </button>
          </div>
          <div class="item15">9</div>
          <div class="item10">10</div>
          <div class="item11">
            <button>
              <a onclick="call('counterclockwise');"><img height=35 Width=35 src="http://localhost:3000/counterclockwise.png"></a>
            </button>
          </div>
          <div class="item12">
            <button>
              <a onclick="call('left');"><img height=35 Width=35 src="http://localhost:3000/left.png"></a>
            </button>
          </div>
          <div class="item13">
            <button type="button" class="btn btn-dark">
              <a onclick="call('hover');">Hover</a>
            </button>
          </div>
          <div class="item14">
            <button>
              <a onclick="call('right');"><img height=35 Width=35 src="http://localhost:3000/right.png"></a>
            </button>
          </div>
          <div class="item15">
            <button>
              <a onclick="call('clockwise');"><img height=35 Width=35 src="http://localhost:3000/clockwise.png"></a>
            </button>
          </div>
          <div class="item16">16</div>
          <div class="item17">17</div>
          <div class="item18">
            <button>
              <a onclick="call('backward');"><img height=35 Width=35 src="http://localhost:3000/backward.png"></a>
            </button>
          </div>
          <div class="item19">19</div>
          <div class="item20">20</div>
          <div class="item21">
            <button class="btn btn-dark" id="startRecognizeOnceAsyncButton">
              Voice
            </button>
          </div>
          <div class="item22">
            <button class="btn btn-dark">
              <a onclick="call('detect');">
                <!-- <img height=35 Width=35 src="http://localhost:3000/forward.png"> -->
                Detect
              </a>
            </button>
          </div>
          <div class="item23">
            <button>
              <a onclick="call('down');"><img height=35 Width=35 src="http://localhost:3000/down.png"></a>
            </button>
          </div>
          <div class="item24">24</div>
          <div class="item25">
            <button type="button" class="btn btn-dark">
            <a onclick="call('reset');">Reset</a>
          </button>
          </div>
        </div>
        <table cellpadding="4">
          <tr>
            <td align="center">
              <!-- <a onclick="call('land');"><img height=35 Width=35 src="http://localhost:3000/land.png"></a> -->
              <button>
                <a onclick="call('flip');">Flip</a>
              </button>
            </td>
          </tr>
          </tr>
        </table>

        <textarea id="phraseDiv" style="display: inline-block;width:500px;height:200px" value = "Voice Results"></textarea>
</body>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script language='javascript'>
    function call(name) {
      // console.log('Call '+name)
      var xhr = new XMLHttpRequest();
      xhr.open('GET', name, true);
      xhr.send();


      //  window.setInterval("reloadIFrame();", 4000);
      //
      //  function reloadIFrame() {
      //    document.getElementById("iframe_DroneImage").src = "http://localhost:3000/DroneImage.html";
       }
  </script>

  <script src="microsoft.cognitiveservices.speech.sdk.bundle.js"></script>

  <script>
  // status fields and start button in UI
  var phraseDiv;
  var startRecognizeOnceAsyncButton;

  // subscription key and region for speech services.
  const subscriptionKey = "9320a85db93e4287bfb476d6cfd9e163";
  const serviceRegion = "westus";
  var SpeechSDK;
  var recognizer;

  document.addEventListener("DOMContentLoaded", function () {
  startRecognizeOnceAsyncButton = document.getElementById("startRecognizeOnceAsyncButton");
  phraseDiv = document.getElementById("phraseDiv");

  startRecognizeOnceAsyncButton.addEventListener("click", function () {
  startRecognizeOnceAsyncButton.disabled = true;
  phraseDiv.innerHTML = "";

  // use the provided subscription key
  const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(subscriptionKey, serviceRegion);

  speechConfig.speechRecognitionLanguage = "en-US";
  var audioConfig  = SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();
  recognizer = new SpeechSDK.SpeechRecognizer(speechConfig, audioConfig);

  recognizer.recognizeOnceAsync(
  function (result) {
    startRecognizeOnceAsyncButton.disabled = false;
    phraseDiv.innerHTML += result.text;
    window.console.log(result);
    // conditionals
console.log(result.text)
    if(result.text == 'Drone take off.'){
      call('takeoff');
      return
    } if (result.text == 'Drone land.') {
      call('land');
      return
    } if  (result.text == 'Drone flip.'){
      call('flip')
    }

    recognizer.close();
    recognizer = undefined;
  },
  function (err) {
    startRecognizeOnceAsyncButton.disabled = false;
    phraseDiv.innerHTML += err;
    window.console.log(err);

    recognizer.close();
    recognizer = undefined;
  });
  });

  // // if (!!window.SpeechSDK) {
  //   SpeechSDK = window.SpeechSDK;
  //   startRecognizeOnceAsyncButton.disabled = false;
  //
  //   document.getElementById('content').style.display = 'block';
  //   document.getElementById('warning').style.display = 'none';
  // }
  });
  </script>
</body>

</html>
